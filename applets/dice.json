{"main":"const throwDuration = 2000;\nconst moveDuration = 150;\n\nfunction randInt(i) { return Math.floor(Math.random() * i); }\nfunction drawDot(ctx, x,y) {\n    const r = Math.min(app.width, app.height)/10;\n    const cx = app.width/2+(x-1)*3*r, cy = app.height/2+(y-1)*3*r;\n    ctx.beginPath();\n    ctx.arc(cx,cy, r, 0, 2*Math.PI, true);\n    ctx.closePath();\n    ctx.fill();\n}\nfunction drawDots(ctx, dots) {\n    for(let i=0; i<dots.length; ++i)\n        drawDot(ctx, dots[i]%3, Math.floor(dots[i]/3));\n}\nfunction moveDice(currValue) {\n    let value;\n    do {\n        value = randInt(6) + 1;\n    } while(value == currValue);\n    return value;\n}\n\nlet currValue = randInt(6) + 1;\nlet status = 'wait';\nlet tThrow = 0;\napp.setBackground('black');\n\napp.addEventListener('update', (deltaT, now)=>{\n    if(status == 'eval') {\n        if(Math.floor((tThrow+deltaT)/moveDuration) != Math.floor(tThrow/moveDuration))\n            currValue = moveDice(currValue);\n        tThrow += deltaT;\n        if(tThrow >= throwDuration)\n            status = 'wait';\n    }\n\n    let ctx = app.getCanvasContext();\n    ctx.fillStyle = 'white';\n    let r = Math.min(app.width, app.height)/2;\n    ctx.fillRect(app.width/2-r,app.height/2-r, 2*r, 2*r);\n\n    ctx.fillStyle = \"black\";\n    switch(currValue) {\n    case 1: drawDots(ctx, [4]); break; \n    case 2: drawDots(ctx, [0, 8]); break; \n    case 3: drawDots(ctx, [0, 4, 8]); break;\n    case 4: drawDots(ctx, [0, 2, 6, 8]); break;\n    case 5: drawDots(ctx, [0, 2, 4, 6, 8]); break;\n    case 6: drawDots(ctx, [0, 2, 3, 5, 6, 8]); break;\n    }\n});\n\napp.addEventListener('pointer', (type, x, y)=>{\n    if(status!='wait' || type!='start')\n        return;\n\n    let ctx = app.getCanvasContext();\n    let cx = app.width/2, cy=app.height/2, r = Math.min(cx, cy);\n    if(x<cx-r || x>cx+r || y<cy-r || y>cy+r)\n        return;\n\n    status = 'eval';\n    tThrow = 0.0;\n    currValue = moveDice(currValue);\n});\n","meta":{"display":"window","title":"dice","author":"gerald.franz@eludi.net","descr":"a simple dice app","keywords":"elowo,progressive web app","color":"#000000","icon":"icon.svg"},"resources":{"icon.svg":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjxzdmcKICAgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIgogICB4bWxuczpjYz0iaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbnMjIgogICB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiCiAgIHhtbG5zOnN2Zz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICAgd2lkdGg9IjEyOCIKICAgaGVpZ2h0PSIxMjgiCiAgIHZpZXdCb3g9IjAgMCAxMjggMTI4IgogICB2ZXJzaW9uPSIxLjEiPgogIDxyZWN0CiAgICAgcnk9IjE5IgogICAgIHk9IjAiCiAgICAgeD0iMCIKICAgICBoZWlnaHQ9IjEyOCIKICAgICB3aWR0aD0iMTI4IgogICAgIHN0eWxlPSJvcGFjaXR5OjE7ZmlsbDojODgwMDQ0O2ZpbGwtb3BhY2l0eToxO3N0cm9rZTpub25lIiAvPgogIDxjaXJjbGUKICAgICByPSIxNCIKICAgICBjeT0iMTAyIgogICAgIGN4PSIyNiIKICAgICBzdHlsZT0ib3BhY2l0eToxO2ZpbGw6I2ZmZmZmZjtmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZSIgLz4KICA8Y2lyY2xlCiAgICAgc3R5bGU9Im9wYWNpdHk6MTtmaWxsOiNmZmZmZmY7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlOm5vbmUiCiAgICAgY3g9IjI2IgogICAgIGN5PSI2NCIKICAgICByPSIxNCIgLz4KICA8Y2lyY2xlCiAgICAgcj0iMTQiCiAgICAgY3k9IjI2IgogICAgIGN4PSIyNiIKICAgICBzdHlsZT0ib3BhY2l0eToxO2ZpbGw6I2ZmZmZmZjtmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZSIgLz4KICA8Y2lyY2xlCiAgICAgcj0iMTQiCiAgICAgY3k9IjY0IgogICAgIGN4PSIxMDIiCiAgICAgc3R5bGU9Im9wYWNpdHk6MTtmaWxsOiNmZmZmZmY7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlOm5vbmUiIC8+CiAgPGNpcmNsZQogICAgIHN0eWxlPSJvcGFjaXR5OjE7ZmlsbDojZmZmZmZmO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTpub25lIgogICAgIGN4PSIxMDIiCiAgICAgY3k9IjI2IgogICAgIHI9IjE0IiAvPgogIDxwYXRoCiAgICAgZD0ibSAxMDIsODggYyAtNy43MzIyMjMsMCAtMTQsNi4yNjc3OCAtMTQsMTQgMCw3LjczMjIyIDYuMjY3Nzc3LDE0IDE0LDE0IDcuMjIzOTgsMCAxMy4xNjk5OSwtNS40Nzk3OCAxMy45MjA0NiwtMTIuNTA0NTQgLTAuODM4NDYsNC4yODg4MSAtNC42MjU1LDcuNTQwOTEgLTkuMTc5NTYsNy41NDA5MSAtNS4xNjkwNywwIC05LjM3MDQ1NSwtNC4xNzc2NCAtOS4zNzA0NTUsLTkuMzIyNzQgMi4yMDk0NjgsMi45MzIyOSA1LjY4ODAyNSw0LjY2MTM3IDkuMzcwNDU1LDQuNjYxMzcgMy42MzA3NSwwIDcuMDQ2MDMsLTEuNjc2NDggOS4yNTkxLC00LjUzNDA5IC0wLjA0MjcsLTMuNjUzOTMgLTEuNTE3NTksLTcuMTQ5NDEgLTQuMTA0NTQsLTkuNzM2MzcgQyAxMDkuMjY5ODYsODkuNDc4OTYgMTA1LjcxMzE0LDg4IDEwMiw4OCBaIG0gMC4wNzk2LDcuNTA5MDkgYyAxLjc2NjMzLDAgMy4xOTc3MSwxLjQzMTM4IDMuMTk3NzEsMy4xOTc3MiAwLDEuNzY2MzUgLTEuNDMxMzgsMy4xOTc3MyAtMy4xOTc3MSwzLjE5NzczIC0xLjc2NjM1LDAgLTMuMTk3NzMyLC0xLjQzMTM4IC0zLjE5NzczMiwtMy4xOTc3MyAwLC0xLjc2NjM0IDEuNDMxMzgyLC0zLjE5NzcyIDMuMTk3NzMyLC0zLjE5NzcyIHoiCiAgICAgc3R5bGU9ImZpbGw6I2ZmZmZmZjtmaWxsLW9wYWNpdHk6MTtmaWxsLXJ1bGU6bm9uemVybztzdHJva2U6bm9uZSIgLz4KPC9zdmc+Cg=="}}