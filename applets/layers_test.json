{"main":"const density = 50;\nconst rnd = function(n) { return Math.floor(Math.random()*n); }\n\nfunction MovingMountainRange(width, height, vel) {\n    let x = 0;\n    let xCoords = [ 0 ];\n    let yCoords = [ Math.floor(app.height-height*0.2-rnd(height*0.8)) ];\n    let addCoord = function(xCoords, yCoords) {\n        let xPrev = xCoords[xCoords.length-1], yPrev = yCoords[yCoords.length-1];\n        let x = xPrev+20+3*rnd(density), dx = x-xPrev;\n        let yMin = Math.max(yPrev-dx, app.height-height);\n        let yMax = Math.min(yPrev+dx, Math.floor(app.height-height*0.2));\n        xCoords.push(x);\n        yCoords.push(yMin+rnd(yMax-yMin));\n        return x;\n    }\n    while(x<width)\n        x = addCoord(xCoords, yCoords);\n\n    let dx = 0;\n    this.draw = function(ctx) {\n        ctx.fillStyle = 'black';\n        ctx.beginPath();\n        ctx.moveTo(0,app.height);\n        for(let i=0; i<xCoords.length; ++i )\n            ctx.lineTo( xCoords[i]-dx, yCoords[i] );\n        ctx.lineTo(app.width, app.height);\n\n        ctx.closePath();\n        ctx.fill();\n    }\n    this.update = function(deltaT) {\n        dx += vel*deltaT/1000;\n        if(xCoords[1]-dx < 0) {\n            xCoords.shift();\n            yCoords.shift();\n            let delta = xCoords[0];\n            for(let i=0; i<xCoords.length; ++i)\n                xCoords[i] -= delta;\n            dx -= delta;\n        }\n        if(xCoords[xCoords.length-1]-dx < app.width)\n            addCoord(xCoords, yCoords);\n    }\n    this.height = function() {\n        return Math.ceil(height);\n    }\n}\n\nfunction createCircleCanvas(r, color='white') {\n    r *= app.pixelRatio;\n    let canvas = document.createElement('canvas');\n    canvas.width = canvas.height = r;\n    let ctx = canvas.getContext('2d');\n    ctx.fillStyle = color;\n    ctx.arc(r/2, r/2, r/2-1, 0, Math.PI * 2);\n    ctx.fill();\n    return canvas;\n}\n\nfunction PositionalLights(coords, color, durationOn, durationOff) {\n    let img = createCircleCanvas(5, color);\n    this.draw = function(ctx,x,y, now) {\n        now = (now/1000.0)%(durationOn+durationOff);\n        if(now>durationOn)\n            return;\n        ctx.save();       \n        for(let i=1; i<coords.length; i+=2)\n            ctx.drawImage(img,coords[i-1]+x-10, coords[i]+y-10, 20, 20);\n        ctx.restore();\n    }\n}\n\napp.addScreen('custom');\nlet starField = app.addCanvasLayer(0).getContext('2d');\nlet mountains = app.addCanvasLayer(1).getContext('2d');\nlet mountainRange = null;\nlet foreground = app.addCanvasLayer(2).getContext('2d');\nlet saucer = app.getResource('saucer.png');\nlet saucerX = 0, saucerY = 0;\nlet lights = new PositionalLights([0,-58, -100,27, 100,27], '#f44', 0.5, 0.15);\nlet star = createCircleCanvas(5);\n\napp.setBackground('linear-gradient(rgb(0,0,63),rgb(55,55,180))');\n\napp.addEventListener('resize', (width, height)=>{\n    const numStars = Math.round(width*height/density/density);\n    for(let i=0; i<numStars; ++i) {\n        let r = rnd(3)+3;\n        starField.drawImage(star, rnd(width), rnd(height), r, r);\n    }\n\n    mountainRange = new MovingMountainRange(width, height/3, 40);\n    saucerX = width/2;\n});\napp.addEventListener('update', (deltaT, now)=>{\n    mountains.clearRect(0,app.height-mountainRange.height(), app.width,mountainRange.height());\n    mountainRange.update(deltaT);\n    mountainRange.draw(mountains);\n\n    foreground.clearRect(0,0,app.width,app.height);\n    saucerY = app.height*0.6+Math.sin(now/500)*75;\n    foreground.drawImage(saucer, saucerX-saucer.width/2, saucerY-saucer.height/2);\n    lights.draw(foreground, saucerX, saucerY, now); \n});\n","resources":{"saucer.png":"data:image/png;base64,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"}}